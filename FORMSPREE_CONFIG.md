# Formspree 防骚扰配置指南

## 已配置的防骚扰功能

### 1. Honeypot 陷阱字段
- **字段名**: `_honeypot`
- **作用**: 对用户不可见的文本字段，正常用户不会填写，如果被填写则判定为机器人
- **配置方式**: 已在前端代码中隐藏显示

### 2. Gotcha 字段
- **字段名**: `_gotcha`
- **作用**: 另一个隐藏字段，用于检测自动提交
- **配置方式**: 已在前端代码中隐藏

### 3. 提交格式限制
- **字段名**: `_format`
- **值**: `plain`
- **作用**: 限制提交格式为纯文本，防止恶意代码注入

### 4. 语言设置
- **字段名**: `_language`
- **值**: `zh`
- **作用**: 设置表单语言为中文

## 需要在Formspree控制台配置的功能

### 1. reCAPTCHA 验证（推荐）
**配置步骤：**
1. 访问 https://formspree.io/forms/xgvpgzny/edit
2. 在 "Security" 选项卡中启用 reCAPTCHA
3. 选择 reCAPTCHA v2 或 v3
4. 保存设置

**前端代码需要添加：**
```html
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<div class="g-recaptcha" data-sitekey="YOUR_SITE_KEY"></div>
```

### 2. 提交频率限制
**配置步骤：**
1. 在 Formspree 控制台的 "Settings" 中
2. 设置 "Rate Limiting"：
   - 同一IP地址每小时最多提交次数
   - 同一邮箱地址每天最多提交次数

### 3. 邮箱验证
**配置步骤：**
1. 在 "Settings" 中启用 "Email Verification"
2. 提交者需要验证邮箱后才能完成提交

### 4. 域名白名单
**配置步骤：**
1. 在 "Security" 中设置 "Allowed Domains"
2. 只允许特定域名的网站提交表单
3. 例如：`yourdomain.com`

### 5. 内容过滤
**配置步骤：**
1. 在 "Settings" 中设置关键词过滤
2. 包含特定关键词的提交将被标记为垃圾邮件

## 高级防骚扰配置

### 1. 自定义验证规则
在 Formspree 控制台的 "Validation" 选项卡中：
- 设置字段格式验证（如电话号码格式）
- 设置必填字段
- 设置字段长度限制

### 2. Webhook 集成
可以配置Webhook来实时处理提交数据：
- 集成到CRM系统
- 自动发送到Slack/钉钉
- 自定义数据处理逻辑

### 3. 提交监控
- 在 Formspree 仪表板查看提交统计
- 设置异常提交警报
- 监控提交IP地址和地理位置

## 最佳实践

### 前端安全措施
1. **客户端验证**：使用JavaScript进行基础验证
2. **加载时间检测**：检测表单填写时间，过快的提交可能是机器人
3. **用户行为分析**：监控鼠标移动和键盘输入模式

### 后端安全措施
1. **IP地址限制**：同一IP的频繁提交应被限制
2. **用户代理检测**：检查浏览器指纹
3. **时间戳验证**：防止重放攻击

### 监控和响应
1. **定期检查日志**：查看异常提交模式
2. **设置警报阈值**：当垃圾邮件超过阈值时发送警报
3. **及时更新规则**：根据新的垃圾邮件模式调整防护策略

## 测试方法

### 1. 正常提交测试
- 填写所有必填字段
- 等待合理时间后提交
- 验证是否收到邮件通知

### 2. 机器人模拟测试
- 使用自动化工具快速提交
- 填写honeypot字段
- 验证是否被正确拦截

### 3. 边界条件测试
- 测试字段长度限制
- 测试特殊字符输入
- 测试重复提交

## 故障排除

### 常见问题
1. **提交失败**：检查网络连接和Formspree服务状态
2. **邮件未收到**：检查垃圾邮件文件夹和邮箱设置
3. **验证码不显示**：检查reCAPTCHA配置和网络环境

### 调试方法
1. 使用浏览器开发者工具查看网络请求
2. 检查Formspree控制台的提交日志
3. 测试不同的网络环境

## 联系方式

如有问题，请参考：
- Formspree官方文档：https://formspree.io/docs
- 技术支持：support@formspree.io